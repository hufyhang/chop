$ch.define("scope",function(){"use strict";function a(a,b){"string"==typeof a&&(b=a,a=document);var c=a,d=c.querySelectorAll("[ch-scope="+b+"]"),e=$$CHOP.scope(b);void 0!==d&&null!==d&&d.forEach(function(a){var b=a;void 0===e._els?e._els=[a]:e._els.push(a),a=a.cloneNode(!0);var c=a.querySelectorAll("[ch-scope]");null!==c&&void 0!==c&&c.forEach(function(a){a.parentNode.removeChild(a)});var d=a.querySelectorAll("[ch-name]");null!==d&&void 0!==d&&d.forEach(function(a){var c=a.getAttribute("ch-name"),d=a.getAttribute("id");d&&c&&(e[c]=$$CHOP.element(b.querySelector("#"+d)))});var f=a.querySelectorAll("[ch-data]");null!==f&&void 0!==f&&f.forEach(function(a){var b=a.getAttribute("id");b&&(void 0===e._data_entities?e._data_entities=[b]:e._data_entities.push(b))})})}function b(a){var b=$$CHOP.scope(a);if(b&&void 0!==b._els&&$$CHOP.isArray(b._els)!==!1){var d=b._data_entities;d.forEach(function(d){var e=!0,f=document.querySelector("#"+d),g=f.getAttribute("ch-data");if(null!==g&&""!==g)e=!1,c(a,g,f,!1);else{var h=f.innerHTML.match(/{{[^{]{1,}}}/g);if(null!==h)for(var i=0,j=h.length;i!==j;++i)g=h[i],g=g.replace(/{{/g,""),g=g.replace(/}}/g,""),c(a,g,f,!0)}var k="keyup",l=f.getAttribute("type");null!==l&&(l=l.toUpperCase(),("RANGE"===l||"SELECT"===f.tagName.toUpperCase())&&(k="change"));var m=f.tagName.toUpperCase();if(("INPUT"===m||"TEXTAREA"===m||"SELECT"===m)&&f.addEventListener(k,function(b){b=b||window.event;var c=b.target||b.srcElement,d=c.value,e=$$CHOP.scopes[a][g].get();d!==e&&$$CHOP.scopes[a][g].set(d)},!1),e){for(var n=f.innerHTML,o=f.innerHTML.match(/{{[^{]{1,}}}/g),i=0;i!==o.length;++i){var p=o[i].replace(/{/g,"");p=p.replace(/}/g,""),n=n.replace(new RegExp(o[i],"g"),b[p].get())}f.innerHTML=n,$$CHOP._loadView(f)}})}}function c(a,b,c,e){var f=$$CHOP.scope(a);void 0===f._data[b]&&(f._data[b]={_els:[],_val:void 0,get:function(){return this._val},set:function(a){if(0===arguments.length)return!1;this._val=a;var b=this;this._els.forEach(function(a){var c=a._isInline;if(c){var e=a._html,g=e.match(/{{[^{]{1,}}}/g)||[];g.forEach(function(a){a=a.replace(/{/g,""),a=a.replace(/}/g,""),e=d(e,a,f._data[a].get())}),document.querySelector("#"+a._id).innerHTML=e}else $$CHOP.find("#"+a._id).val(b._val)})}});var g=c.getAttribute("id");f._data[b]._els.push({_isInline:e,_id:g,_html:c.innerHTML}),$$CHOP.scopes[a][b]=f._data[b]}function d(a,b,c){var d=new RegExp("{{"+b+"}}","g");return a.replace(d,c)}$$CHOP.scopes={},$$CHOP.scope=function(c,d){if("string"!=typeof c)throw new Error("$ch.scope requires at least a string-type name parameter.");if(void 0===d)return $$CHOP.scopes[c];$$CHOP.scopes[c]={_els:[],_data_entities:[],_data:{}},a(c),b(c),d.call(this,$$CHOP.scopes[c]);var e=$$CHOP._loadView;return $$CHOP._loadView=function(b){(void 0===b||null===b)&&(b=document),a(c),e(b)},$$CHOP}});