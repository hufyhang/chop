$ch.define("directive",function(){"use strict";$ch.require("event"),$$CHOP.directive={},$$CHOP.directive={updateEvents:{},add:function(a,b,c){if(arguments.length<2)throw new Error("$ch.directive.add requires two parameters.");if("string"!=typeof a)throw new Error("$ch.directive.add requires a string-type parameter for the cutomized directive.");if("string"==typeof b){var d=document.createElement("template");d.innerHTML=b,b=d}var e=Object.create(HTMLElement.prototype);return e.createdCallback=function(){var a=this.createShadowRoot();a.appendChild(b.content.cloneNode(!0));var d,e;if(void 0!==c){var f=this;"function"==typeof c?(d=c,e=function(){}):(d=c.onCreated||function(){},e=c.onUpdated||function(){}),$ch.event.nextTick(function(){d.apply(f,[f,a])})}else e=function(){};var g=this.getAttribute("id");null!==g&&($$CHOP.directive.updateEvents[g]={el:this,shadow:a,onUpdate:e})},document.registerElement(a,{prototype:e}),this},update:function(a,b){if(2!==arguments.length)throw new Error("$ch.directive.update requires two parameters.");var c=this.updateEvents[a];if(void 0===c)throw new Error('No onUpdated events registered for "'+a+'".');c.el.innerHTML=b,c.onUpdate(b,c.el,c.shadow)}}});