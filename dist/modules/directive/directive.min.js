$ch.define("directive",function(){"use strict";$$CHOP.directive={},$$CHOP.directive={updateEvents:{},add:function(a,b,c){if(arguments.length<2)throw new Error("$ch.directive.add requires two parameters.");if("string"!=typeof a)throw new Error("$ch.directive.add requires a string-type parameter for the cutomized directive.");if("string"==typeof b){var d=document.createElement("template");d.innerHTML=b,b=d}var e,f,g,h,i,j=Object.create(HTMLElement.prototype);"function"==typeof c?(e=c,f=function(){},g=function(){},h=function(){},i=function(){}):(e=c.onCreated||function(){},f=c.onUpdated||function(){},g=c.onAttribute||function(){},h=c.onAttached||function(){},i=c.onDetached||function(){});var k=e;return e=function(){if(this.createShadowRoot){var a=this.createShadowRoot();a.appendChild(b.content.cloneNode(!0))}else this.appendChild(b.content.cloneNode(!0));k.apply(this);var c=this.getAttribute("id");null!==c&&($$CHOP.directive.updateEvents[c]={el:this,shadow:a,onUpdate:f})},j.createdCallback=e,j.attachedCallback=h,j.detachedCallback=i,j.attributeChangedCallback=g,document.registerElement(a,{prototype:j}),this},update:function(a,b){if(2!==arguments.length)throw new Error("$ch.directive.update requires two parameters.");var c=this.updateEvents[a];if(void 0===c)throw new Error('No onUpdated events registered for "'+a+'".');c.el.innerHTML=b,c.onUpdate(b,c.el,c.shadow)}}}),function(a,b,c,d){"use strict";function e(a,b){for(var c=0,d=a.length;d>c;c++)m(a[c],b)}function f(a){for(var b,c=0,d=a.length;d>c;c++)b=a[c],l(b,y[h(b)])}function g(a){return function(b){E.call(P,b)&&(m(b,a),e(b.querySelectorAll(z),a))}}function h(a){var b=a.getAttribute("is");return B.call(x,b?b.toUpperCase():a.nodeName)}function i(a){var b=a.currentTarget,c=a.attrChange,d=a.prevValue,e=a.newValue;b.attributeChangedCallback&&"style"!==a.attrName&&b.attributeChangedCallback(a.attrName,c===a.ADDITION?null:d,c===a.REMOVAL?null:e)}function j(a){var b=g(a);return function(a){b(a.target)}}function k(a,b){var c=this;R.call(c,a,b),n.call(c,{target:c})}function l(a,b){M(a,b),q?q.observe(a,T):(W&&(a.setAttribute=k,a[r]=p(a),a.addEventListener(u,n)),a.addEventListener(t,i)),a.createdCallback&&(a.created=!0,a.createdCallback(),a.created=!1)}function m(a,b){var c,d=h(a),e="attached",f="detached";d>-1&&(N(a,y[d]),d=0,b!==e||a[e]?b!==f||a[f]||(a[e]=!1,a[f]=!0,d=1):(a[f]=!1,a[e]=!0,d=1),d&&(c=a[b+"Callback"])&&c.call(a))}if(!(d in b)){var n,o,p,q,r="__"+d+(1e5*Math.random()>>0),s="extends",t="DOMAttrModified",u="DOMSubtreeModified",v=/^[A-Z][A-Z0-9]*(?:-[A-Z0-9]+)+$/,w=["ANNOTATION-XML","COLOR-PROFILE","FONT-FACE","FONT-FACE-SRC","FONT-FACE-URI","FONT-FACE-FORMAT","FONT-FACE-NAME","MISSING-GLYPH"],x=[],y=[],z="",A=b.documentElement,B=x.indexOf||function(a){for(var b=this.length;b--&&this[b]!==a;);return b},C=c.prototype,D=C.hasOwnProperty,E=C.isPrototypeOf,F=c.defineProperty,G=c.getOwnPropertyDescriptor,H=c.getOwnPropertyNames,I=c.getPrototypeOf,J=c.setPrototypeOf,K=!!c.__proto__,L=c.create||function X(a){return a?(X.prototype=a,new X):this},M=J||(K?function(a,b){return a.__proto__=b,a}:H&&G?function(){function a(a,b){for(var c,d=H(b),e=0,f=d.length;f>e;e++)c=d[e],D.call(a,c)||F(a,c,G(b,c))}return function(b,c){do a(b,c);while(c=I(c));return b}}():function(a,b){for(var c in b)a[c]=b[c];return a}),N=J||K?function(a,b){E.call(b,a)||l(a,b)}:function(a,b){a[r]||(a[r]=c(!0),l(a,b))},O=a.MutationObserver||a.WebKitMutationObserver,P=(a.HTMLElement||a.Element||a.Node).prototype,Q=P.cloneNode,R=P.setAttribute,S=b.createElement,T=O&&{attributes:!0,characterData:!0,attributeOldValue:!0},U=O||function(){W=!1,A.removeEventListener(t,U)},V=!1,W=!0;O||(A.addEventListener(t,U),A.setAttribute(r,1),A.removeAttribute(r),W&&(n=function(a){var b,c,d,e=this;if(e===a.target){b=e[r],e[r]=c=p(e);for(d in c){if(!(d in b))return o(0,e,d,b[d],c[d],"ADDITION");if(c[d]!==b[d])return o(1,e,d,b[d],c[d],"MODIFICATION")}for(d in b)if(!(d in c))return o(2,e,d,b[d],c[d],"REMOVAL")}},o=function(a,b,c,d,e,f){var g={attrChange:a,currentTarget:b,attrName:c,prevValue:d,newValue:e};g[f]=a,i(g)},p=function(a){for(var b,c,d={},e=a.attributes,f=0,g=e.length;g>f;f++)b=e[f],c=b.name,"setAttribute"!==c&&(d[c]=b.value);return d})),b[d]=function(a,c){if(d=a.toUpperCase(),V||(V=!0,O?(q=function(a,b){function c(a,b){for(var c=0,d=a.length;d>c;b(a[c++]));}return new O(function(d){for(var e,f,g=0,h=d.length;h>g;g++)e=d[g],"childList"===e.type?(c(e.addedNodes,a),c(e.removedNodes,b)):(f=e.target,f.attributeChangedCallback&&"style"!==e.attributeName&&f.attributeChangedCallback(e.attributeName,e.oldValue,f.getAttribute(e.attributeName)))})}(g("attached"),g("detached")),q.observe(b,{childList:!0,subtree:!0})):(b.addEventListener("DOMNodeInserted",j("attached")),b.addEventListener("DOMNodeRemoved",j("detached"))),b.addEventListener("readystatechange",function(){e(b.querySelectorAll(z),"attached")}),b.createElement=function(a,c){var d,e=S.apply(b,arguments);return c&&e.setAttribute("is",a=c.toLowerCase()),d=B.call(x,a.toUpperCase()),d>-1&&l(e,y[d]),e},P.cloneNode=function(a){var b=Q.call(this,!!a),c=h(b);return c>-1&&l(b,y[c]),a&&f(b.querySelectorAll(z)),b}),-1<B.call(x,d))throw new Error("A "+a+" type is already registered");if(!v.test(d)||-1<B.call(w,d))throw new Error("The type "+a+" is invalid");var d,i=function(){return b.createElement(n,m&&d)},k=c||C,m=D.call(k,s),n=m?c[s]:d,o=x.push(d)-1;return z=z.concat(z.length?",":"",m?n+'[is="'+a.toLowerCase()+'"]':n),i.prototype=y[o]=D.call(k,"prototype")?k.prototype:L(P),e(b.querySelectorAll(z),"attached"),i}}}(window,document,Object,"registerElement");