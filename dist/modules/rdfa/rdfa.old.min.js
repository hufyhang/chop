$ch.define("rdfa",function(){"use strict";$$CHOP.rdfa={};var a=function(a,b,c){if(void 0===c){var d=a.querySelectorAll("["+b+"]"),e=[];return $$CHOP.each(d,function(a){a=a.getAttribute(b).trim(),-1===e.indexOf(a)&&e.push(a)}),d=e}var f=a.querySelectorAll("["+b+'="'+c+'"]');if(null===f)return null;var g=[];return $$CHOP.each(f,function(a){var b={};b.el=a,b.scope=b.el,b.innerHTML=a.innerHTML;var c=a.getAttribute("href");null!==c&&(b.href=c),c=a.getAttribute("about"),null!==c&&(b.about=c),c=a.getAttribute("typeof"),null!==c&&(b.typeof=c),c=a.getAttribute("resource"),null!==c&&(b.resource=c),c=a.getAttribute("property"),null!==c&&(b.property=c),c=a.getAttribute("rel"),null!==c&&(b.rel=c),c=a.getAttribute("content"),null!==c&&(b.content=c),g.push(b)}),g};$$CHOP.rdfa={scope:document,about:function(b,c){return 0===arguments.length?(b=this.scope,c=void 0):1===arguments.length&&("string"==typeof b?(c=b,b=this.scope):c=void 0),a(b,"about",c)},rel:function(b,c){return 0===arguments.length?(b=this.scope,c=void 0):1===arguments.length&&("string"==typeof b?(c=b,b=this.scope):c=void 0),a(b,"rel",c)},property:function(b,c){return 0===arguments.length?(b=this.scope,c=void 0):1===arguments.length&&("string"==typeof b?(c=b,b=this.scope):c=void 0),a(b,"property",c)},"typeof":function(b,c){return 0===arguments.length?(b=this.scope,c=void 0):1===arguments.length&&("string"==typeof b?(c=b,b=this.scope):c=void 0),a(b,"typeof",c)},content:function(b,c){return 0===arguments.length?(b=this.scope,c=void 0):1===arguments.length&&("string"==typeof b?(c=b,b=this.scope):c=void 0),a(b,"content",c)},resource:function(b,c){return 0===arguments.length?(b=this.scope,c=void 0):1===arguments.length&&("string"==typeof b?(c=b,b=this.scope):c=void 0),a(b,"resource",c)},trace:function(a,b,c){if(0===arguments.length)throw new Error("$ch.rdfa.trace requires at least one parameter.");if("string"==typeof a)b=a,a=this.scope;else if(arguments.length<2)throw new Error("$ch.rdfa.trace requires a target parameter.");void 0===c&&(c="href");var d=a.querySelectorAll("["+b+"]"),e={};return $$CHOP.each(d,function(b){var d=b.getAttribute(c);e[d]={};var f=a.querySelector('[resource="'+d+'"]');null===f&&(f=a.querySelector('[about="'+d+'"]')),e[d].scope=f;var g=f.getAttribute("typeof");e[d].typeof=g;var h=f.querySelectorAll("[property]");$$CHOP.each(h,function(a){var b=a.getAttribute("property"),c=a.getAttribute("content")||a.innerHTML;e[d][b]=c})}),e},_checkProperty:function(a,b,c,d){var e=a.querySelectorAll("[property],[rel]");return $$CHOP.each(e,function(a){var e=a.getAttribute("href"),f=a.getAttribute("typeof"),g=a.getAttribute("property")||a.getAttribute("rel"),h=a.getAttribute("content")||a.getAttribute("resource")||f||e||a.innerHTML;null!==f?((void 0===b[d][g]||$$CHOP.isArray(b[d][g])===!1)&&(b[d][g]=[]),b[d][g].push(h)):(null!==e?((void 0===b[d][g]||$$CHOP.isArray(b[d][g])===!1)&&(b[d][g]=[]),b[d][g].push(e)):b[d][g]=h,c.push(a))}),b},_tree:function(a,b,c,d){d=void 0===d?"[about],[resource]":'[about="'+d+'"],[resource="'+d+'"]';var e=this,f=a.querySelectorAll(d);return $$CHOP.each(f,function(a){if(-1===b.indexOf(a)){b.push(a);var d=a.getAttribute("about")||a.getAttribute("resource");c[d]={};var f=a.getAttribute("typeof");c[d].typeof=f;var g=a.getAttribute("property")||a.getAttribute("rel");null!==g&&(c[d][g]=a.getAttribute("content")||a.getAttribute("resource")||a.getAttribute("href")||a.innerHTML),c=e._checkProperty(a,c,b,d)}}),f=a.querySelectorAll("[typeof]"),$$CHOP.each(f,function(a){if(-1===b.indexOf(a)){b.push(a);var d=a.getAttribute("typeof");c[d]={},c[d].typeof=d;var f=a.getAttribute("property")||a.getAttribute("rel");null!==f&&(c[d][f]=a.getAttribute("content")||a.getAttribute("resource")||a.getAttribute("href")||a.innerHTML),c=e._checkProperty(a,c,b,d)}}),f=a.querySelectorAll("[property]"),c.document={},c.document.typeof="Document",$$CHOP.each(f,function(a){if(-1===b.indexOf(a)){b.push(a);var d=a.getAttribute("property");null!==d&&(c.document[d]=a.getAttribute("content")||a.getAttribute("href")||a.innerHTML)}}),c},tree:function(a){void 0===a&&(a=this.scope);var b={},c=[];return b=this._tree(a,c,b)}}});