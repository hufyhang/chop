$ch.define("promise",function(){"use strict";$$CHOP.promise={},$$CHOP.promise={defer:function(){var a={promise:this,data:void 0,callbacks:[],saveCallback:void 0,then:function(a,t){if(0===arguments.length)throw new Error("$ch.promise.event requires at least a resolve callback parameter.");return this.callbacks.push(a),this.saveCallback=t,this},resolve:function(a){this.data=a;var t=this;$$CHOP.each(this.callbacks,function(a){t.data=a(t.data)})},reject:function(a){if(this.data=a,void 0===this.saveCallback)throw new Error("$ch.promise reject callback function is missing.");this.saveCallback(this.data)}};return a}}});