$ch.define("promise",function(){"use strict";$$CHOP.promise={},$$CHOP.promise={defer:function(){var a={promise:this,data:void 0,callbacks:[],saveCallback:void 0,then:function(a){return this.callbacks.push(a),this},save:function(a){return this.saveCallback=a,this},resolve:function(a){this.data=a;var t=this;$$CHOP.each(this.callbacks,function(a){t.data=a(t.data)})},reject:function(a){this.data=a,this.saveCallback(this.data)}};return a}}});