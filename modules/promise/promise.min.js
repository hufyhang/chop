$ch.define("promise",function(){"use strict";var t={promise:this,data:void 0,callbacks:[],then:function(t){return this.callbacks.push(t),this},resolve:function(t){this.data=t,$$CHOP.each(this.callbacks,function(t){this.data=t(this.data)})}};$$CHOP.promise={},$$CHOP.promise={defer:function(){return Object.create(t)}}});