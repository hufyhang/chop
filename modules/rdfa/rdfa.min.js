$ch.define("rdfa",function(){"use strict";$$CHOP.rdfa={};var t=function(t,e,r){if(void 0===r){var n=t.querySelectorAll("["+e+"]"),o=[];return $$CHOP.each(n,function(t){t=t.getAttribute(e).trim(),-1===o.indexOf(t)&&o.push(t)}),n=o}var u=t.querySelectorAll("["+e+'="'+r+'"]');if(null===u)return null;var i=[];return $$CHOP.each(u,function(t){var e={};e.el=t,e.scope=e.el,e.innerHTML=t.innerHTML;var r=t.getAttribute("href");null!==r&&(e.href=r),r=t.getAttribute("about"),null!==r&&(e.about=r),r=t.getAttribute("typeof"),null!==r&&(e.typeof=r),r=t.getAttribute("resource"),null!==r&&(e.resource=r),r=t.getAttribute("property"),null!==r&&(e.property=r),r=t.getAttribute("rel"),null!==r&&(e.rel=r),r=t.getAttribute("content"),null!==r&&(e.content=r),i.push(e)}),i};$$CHOP.rdfa={scope:document,about:function(e,r){return 0===arguments.length?(e=this.scope,r=void 0):1===arguments.length&&("string"==typeof e?(r=e,e=this.scope):r=void 0),t(e,"about",r)},rel:function(e,r){return 0===arguments.length?(e=this.scope,r=void 0):1===arguments.length&&("string"==typeof e?(r=e,e=this.scope):r=void 0),t(e,"rel",r)},property:function(e,r){return 0===arguments.length?(e=this.scope,r=void 0):1===arguments.length&&("string"==typeof e?(r=e,e=this.scope):r=void 0),t(e,"property",r)},"typeof":function(e,r){return 0===arguments.length?(e=this.scope,r=void 0):1===arguments.length&&("string"==typeof e?(r=e,e=this.scope):r=void 0),t(e,"typeof",r)},content:function(e,r){return 0===arguments.length?(e=this.scope,r=void 0):1===arguments.length&&("string"==typeof e?(r=e,e=this.scope):r=void 0),t(e,"content",r)},resource:function(e,r){return 0===arguments.length?(e=this.scope,r=void 0):1===arguments.length&&("string"==typeof e?(r=e,e=this.scope):r=void 0),t(e,"resource",r)},trace:function(t,e,r){if(0===arguments.length)throw new Error("$ch.rdfa.trace requires at least one parameter.");if("string"==typeof t)e=t,t=this.scope;else if(arguments.length<2)throw new Error("$ch.rdfa.trace requires a target parameter.");void 0===r&&(r="href");var n=t.querySelectorAll("["+e+"]"),o={};return $$CHOP.each(n,function(e){var n=e.getAttribute(r);o[n]={};var u=t.querySelector('[resource="'+n+'"]');null===u&&(u=t.querySelector('[about="'+n+'"]')),o[n].scope=u;var i=u.getAttribute("typeof");o[n].typeof=i;var c=u.querySelectorAll("[property]");$$CHOP.each(c,function(t){var e=t.getAttribute("property"),r=t.getAttribute("content")||t.innerHTML;o[n][e]=r})}),o},_tree:function(t,e,r,n){n=void 0===n?"[about],[resource]":'[about="'+n+'"],[resource="'+n+'"]';var o=t.querySelectorAll(n);return $$CHOP.each(o,function(t){if(-1===e.indexOf(t)){e.push(t);var n=t.getAttribute("about")||t.getAttribute("resource");r[n]={},r[n].typeof=t.getAttribute("typeof");var o=t.querySelectorAll("[property]");$$CHOP.each(o,function(t){e.push(t);var o=t.getAttribute("href"),u=t.getAttribute("property"),i=t.getAttribute("content")||o||t.innerHTML;null!==o?((void 0===r[n][u]||$$CHOP.isArray(r[n][u])===!1)&&(r[n][u]=[]),r[n][u].push(o)):r[n][u]=i})}}),o=t.querySelectorAll("[typeof]"),$$CHOP.each(o,function(t){if(-1===e.indexOf(t)){e.push(t);var n=t.getAttribute("typeof");r[n]={},r[n].typeof=n;var o=t.querySelectorAll("[property]");$$CHOP.each(o,function(t){var o=t.getAttribute("href"),u=t.getAttribute("typeof"),i=t.getAttribute("property"),c=t.getAttribute("content")||o||t.innerHTML;null!==u?((void 0===r[n][i]||$$CHOP.isArray(r[n][i])===!1)&&(r[n][i]=[]),r[n][i].push(u)):(null!==o?((void 0===r[n][i]||$$CHOP.isArray(r[n][i])===!1)&&(r[n][i]=[]),r[n][i].push(o)):r[n][i]=c,e.push(t))})}}),o=t.querySelectorAll("[property]"),r.document={},r.document.typeof="Document",$$CHOP.each(o,function(t){if(-1===e.indexOf(t)){e.push(t);var n=t.getAttribute("property");null!==n&&(r.document[n]=t.getAttribute("content")||t.getAttribute("href")||t.innerHTML)}}),r},tree:function(t){void 0===t&&(t=this.scope);var e={},r=[];return e=this._tree(t,r,e)}}});