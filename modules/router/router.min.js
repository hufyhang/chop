$ch.define("router",function(){"use strict";var r=function(r){return"[object Array]"===Object.prototype.toString.call(r)};$$CHOP.router={},$$CHOP.router={routes:{},mode:"hash",root:"/",getFragment:function(){var r=window.location.href.match(/#(.*)$/),e=r?r[1]:"";return this.clearSlashes(e)},clearSlashes:function(r){return r.toString().replace(/\/$/,"").replace(/^\//,"")},add:function(r){if(void 0===r)throw new Error("$ch.router.add requires a parameter.");var e,t,a=this.routes==={}?!0:!1;for(var o in r)r.hasOwnProperty(o)&&(e=o,t=r[o],this.routes[e]=t);return a&&this.navigate(),!0},remove:function(e){return e&&(r(e)||(e=[e]),e.forEach(function(r){delete this.routes[r]})),this},flush:function(){return this.routes={},this.mode="hash",this.root="/",this},navigate:function(r){if(0===arguments.length)throw new Error("$ch.navigate requires a parameter.");if(void 0!==r){var e=r.match(/^\/.*/);e||(r="/"+r),window.location.href.match(/#(.*)$/),window.location.href=window.location.href.replace(/#(.*)$/,"")+"#"+r}for(var t=this.getFragment(r),a={},o=Object.keys(this.routes),n=0,i=o.length;n!==i;++n){var h=o[n];h=h.replace(/:\w+/g,".+");var s=new RegExp(h),c=t.match(s);if(null!==c){var u=o[n],l=[],f=u.match(/:\w+/g);if(null!==f){var v,g,w=u.split("/");for(v=0,g=f.length;v!==g;++v){var d=f[v],p=w.indexOf(d),m=d.replace(/:/,"");-1!==p&&void 0===a[m]&&(l.push(p),a[m]="")}w=t.split("/");var $=Object.keys(a);for(v=0,g=l.length;v!==g;++v){var O=l[v];a[$[v]]=w[O]}}}}o=Object.keys(this.routes);for(var y=0;y!==o.length;++y){var b=o[y],j=o[y];if(void 0!==b){b=b.replace(/\//g,"\\/"),b=b.replace(/:\w+/g,".+");var E=new RegExp(b);null!==t.match(E)&&this.routes[j](a)}}return this}}});