$ch.define("math",function(){"use strict";function cot(a){return 1/Math.tan(a)}$$CHOP.math={},Math.constructor.prototype.cot=cot;var generateEval=function(a){var t=a.match(/sin\(.*?\)/g);null!==t&&$$CHOP.each(t,function(t){var r=t.replace(/sin\(/g,"Math.sin(");a=a.replace(t,r)});var r=a.match(/cos\(.*?\)/g);null!==r&&$$CHOP.each(r,function(t){var r=t.replace(/cos\(/g,"Math.cos(");a=a.replace(t,r)});var e=a.match(/tan\(.*?\)/g);null!==e&&$$CHOP.each(e,function(t){var r=t.replace(/tan\(/g,"Math.tan(");a=a.replace(t,r)});var c=a.match(/cot\(.*?\)/g);null!==c&&$$CHOP.each(c,function(t){var r=t.replace(/cot\(/g,"Math.cot(");a=a.replace(t,r)});var n=a.match(/sqrt\(.*?\)/g);null!==n&&$$CHOP.each(n,function(t){var r=t.replace(/sqrt\(/g,"Math.sqrt(");a=a.replace(t,r)});var l=a.match(/\d\ *\^\ *\d/g);return null!==l&&$$CHOP.each(l,function(t){var r=t.replace(/\^/g,",");r="Math.pow("+r+")",a=a.replace(t,r)}),a};$$CHOP.math={eval:function(calc){if(1!==arguments.length)throw new Error("$ch.math.eval requires a calculation parameter.");if("string"!=typeof calc)return!1;calc=generateEval(calc);for(var value=eval(calc),valueStr=value+"",factor=2,prev="",startMatch=!1,index=valueStr.length-1;-1!==index;--index){var digit=valueStr[index];if(digit===prev)startMatch===!1&&(startMatch=!0),++factor;else if(startMatch===!0)break;prev=digit}return factor=Math.pow(10,factor),Math.round(value*factor)/factor}}});