$ch.define("context",function(){"use strict";$$CHOP.context={};var n=function(){var n=window.navigator.userLanguage||window.navigator.language;return n},r=function(){return window.navigator.userAgent},e=function(n){if(!navigator.geolocation)throw new Error("Geolocation is not supported by this browser.");navigator.geolocation.getCurrentPosition(function(r){var e=r.coords;n(e)})},o=function(){var n,r,e,o=navigator.userAgent,a=navigator.appName,t=""+parseFloat(navigator.appVersion),i=parseInt(navigator.appVersion,10);return-1!==(r=o.indexOf("Opera"))?(a="Opera",t=o.substring(r+6),-1!==(r=o.indexOf("Version"))&&(t=o.substring(r+8))):-1!==(r=o.indexOf("MSIE"))?(a="Internet Explorer",t=o.substring(r+5)):-1!==(r=o.indexOf("Chrome"))?(a="Chrome",t=o.substring(r+7)):-1!==(r=o.indexOf("Safari"))?(a="Safari",t=o.substring(r+7),-1!==(r=o.indexOf("Version"))&&(t=o.substring(r+8))):-1!==(r=o.indexOf("Firefox"))?(a="Firefox",t=o.substring(r+8)):(n=o.lastIndexOf(" ")+1)<(r=o.lastIndexOf("/"))&&(a=o.substring(n,r),t=o.substring(r+1),a.toLowerCase()===a.toUpperCase()&&(a=navigator.appName)),-1!==(e=t.indexOf(";"))&&(t=t.substring(0,e)),-1!==(e=t.indexOf(" "))&&(t=t.substring(0,e)),i=parseInt(""+t,10),isNaN(i)&&(t=""+parseFloat(navigator.appVersion),i=parseInt(navigator.appVersion,10)),{name:a,fullVersion:t,majorVersion:i}};$$CHOP.context={language:n(),userAgent:r(),geolocation:function(n){if(void 0===n)throw new Error("$ch.context.geolocation requires a callback parameter.");e(n)},browser:o()}});