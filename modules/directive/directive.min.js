$ch.define("directive",function(){"use strict";$ch.require("event"),$$CHOP.directive={},$$CHOP.directive={updateEvents:{},add:function(e,t,r){if(arguments.length<2)throw new Error("$ch.directive.add requires two parameters.");if("string"!=typeof e)throw new Error("$ch.directive.add requires a string-type parameter for the cutomized directive.");if("string"==typeof t){var n=document.createElement("template");n.innerHTML=t,t=n}var i=Object.create(HTMLElement.prototype);return i.createdCallback=function(){var e=this.createShadowRoot();e.appendChild(t.content.cloneNode(!0));var n,i;if(void 0!==r){var o=this;"function"==typeof r?(n=r,i=function(){}):(n=r.onCreated||function(){},i=r.onUpdated||function(){}),$ch.event.nextTick(function(){n.apply(o,[o,e])})}else i=function(){};var a=this.getAttribute("id");null!==a&&($$CHOP.directive.updateEvents[a]={el:this,shadow:e,onUpdate:i})},document.registerElement(e,{prototype:i}),this},update:function(e,t){if(2!==arguments.length)throw new Error("$ch.directive.update requires two parameters.");var r=this.updateEvents[e];if(void 0===r)throw new Error('No onUpdated events registered for "'+e+'".');r.el.innerHTML=t,r.onUpdate(t,r.el,r.shadow)}}});