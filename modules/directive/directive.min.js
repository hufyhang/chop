$ch.define("directive",function(){"use strict";$ch.require("event"),$$CHOP.directive={},$$CHOP.directive={updateEvents:[],add:function(e,t,r){if(arguments.length<2)throw new Error("$ch.directive.add requires two parameters.");if("string"!=typeof e)throw new Error("$ch.directive.add requires a string-type parameter for the cutomized directive.");if("string"==typeof t){var n=document.createElement("template");n.innerHTML=t,t=n}var i=Object.create(HTMLElement.prototype);return i.createdCallback=function(){var e=this.createShadowRoot();e.appendChild(t.content.cloneNode(!0));var n,i;if(void 0!==r){var o=this;"function"==typeof r?(n=r,i=function(){}):(n=r.onCreated||function(){},i=r.onUpdate||function(){}),$ch.event.nextTick(function(){n.apply(o,[o,e])})}else i=function(){};$$CHOP.directive.updateEvents.push({el:this,shadow:e,onUpdate:i})},document.registerElement(e,{prototype:i}),this},update:function(e,t){if(2!==arguments.length)throw new Error("$ch.directive.update requires two parameters.");if(void 0===e)throw new Error("No such element in the current DOM.");e.innerHTML=t;var r,n;$$CHOP.each(this.updateEvents,function(t){t.el===e&&(r=t.onUpdate,n=t.shadow)}),void 0!==r&&r(t,e,n)}}});