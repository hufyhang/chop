$ch.define("directive",function(){"use strict";$ch.require("event"),$$CHOP.directive={},$$CHOP.directive={updateEvents:{},add:function(e,t,r){if(arguments.length<2)throw new Error("$ch.directive.add requires two parameters.");if("string"!=typeof e)throw new Error("$ch.directive.add requires a string-type parameter for the cutomized directive.");if("string"==typeof t){var n=document.createElement("template");n.innerHTML=t,t=n}var a=Object.create(HTMLElement.prototype);return a.createdCallback=function(){var e=this.createShadowRoot();e.appendChild(t.content.cloneNode(!0));var n,a;if(void 0!==r){var i=this;"function"==typeof r?(n=r,a=function(){}):(n=r.onCreated||function(){},a=r.onUpdated||function(){}),$ch.event.nextTick(function(){n.apply(i,[i,e])})}else a=function(){};var o=this.getAttribute("id");null!==o&&($$CHOP.directive.updateEvents[o]={el:this,shadow:e,onUpdate:a})},document.registerElement(e,{prototype:a}),this},update:function(e,t){if(2!==arguments.length)throw new Error("$ch.directive.update requires two parameters.");var r=this.updateEvents[e];if(void 0===r)throw new Error('No onUpdated events registered for "'+e+'".');r.el.innerHTML=t,r.onUpdate(t,r.el,r.shadow)}}}),function(e,t,r,n){"use strict";function a(e,t){for(var r=0,n=e.length;n>r;r++)f(e[r],t)}function i(e){for(var t,r=0,n=e.length;n>r;r++)t=e[r],s(t,N[c(t)])}function o(e){return function(t){I.call(V,t)&&(f(t,e),a(t.querySelectorAll(w),e))}}function c(e){var t=e.getAttribute("is");return M.call(C,t?t.toUpperCase():e.nodeName)}function u(e){var t=e.currentTarget,r=e.attrChange,n=e.prevValue,a=e.newValue;t.attributeChangedCallback&&"style"!==e.attrName&&t.attributeChangedCallback(e.attrName,r===e.ADDITION?null:n,r===e.REMOVAL?null:a)}function l(e){var t=o(e);return function(e){t(e.target)}}function d(e,t){var r=this;Z.call(r,e,t),h.call(r,{target:r})}function s(e,t){q(e,t),g?g.observe(e,G):(W&&(e.setAttribute=d,e[b]=v(e),e.addEventListener(E,h)),e.addEventListener(O,u)),e.createdCallback&&(e.created=!0,e.createdCallback(),e.created=!1)}function f(e,t){var r,n=c(e),a="attached",i="detached";n>-1&&(H(e,N[n]),n=0,t!==a||e[a]?t!==i||e[i]||(e[a]=!1,e[i]=!0,n=1):(e[i]=!1,e[a]=!0,n=1),n&&(r=e[t+"Callback"])&&r.call(e))}if(!(n in t)){var h,p,v,g,b="__"+n+(1e5*Math.random()>>0),m="extends",O="DOMAttrModified",E="DOMSubtreeModified",y=/^[A-Z][A-Z0-9]*(?:-[A-Z0-9]+)+$/,A=["ANNOTATION-XML","COLOR-PROFILE","FONT-FACE","FONT-FACE-SRC","FONT-FACE-URI","FONT-FACE-FORMAT","FONT-FACE-NAME","MISSING-GLYPH"],C=[],N=[],w="",L=t.documentElement,M=C.indexOf||function(e){for(var t=this.length;t--&&this[t]!==e;);return t},T=r.prototype,F=T.hasOwnProperty,I=T.isPrototypeOf,$=r.defineProperty,P=r.getOwnPropertyDescriptor,D=r.getOwnPropertyNames,_=r.getPrototypeOf,k=r.setPrototypeOf,R=!!r.__proto__,S=r.create||function X(e){return e?(X.prototype=e,new X):this},q=k||(R?function(e,t){return e.__proto__=t,e}:D&&P?function(){function e(e,t){for(var r,n=D(t),a=0,i=n.length;i>a;a++)r=n[a],F.call(e,r)||$(e,r,P(t,r))}return function(t,r){do e(t,r);while(r=_(r));return t}}():function(e,t){for(var r in t)e[r]=t[r];return e}),H=k||R?function(e,t){I.call(t,e)||s(e,t)}:function(e,t){e[b]||(e[b]=r(!0),s(e,t))},U=e.MutationObserver||e.WebKitMutationObserver,V=(e.HTMLElement||e.Element||e.Node).prototype,x=V.cloneNode,Z=V.setAttribute,j=t.createElement,G=U&&{attributes:!0,characterData:!0,attributeOldValue:!0},z=U||function(){W=!1,L.removeEventListener(O,z)},K=!1,W=!0;U||(L.addEventListener(O,z),L.setAttribute(b,1),L.removeAttribute(b),W&&(h=function(e){var t,r,n,a=this;if(a===e.target){t=a[b],a[b]=r=v(a);for(n in r){if(!(n in t))return p(0,a,n,t[n],r[n],"ADDITION");if(r[n]!==t[n])return p(1,a,n,t[n],r[n],"MODIFICATION")}for(n in t)if(!(n in r))return p(2,a,n,t[n],r[n],"REMOVAL")}},p=function(e,t,r,n,a,i){var o={attrChange:e,currentTarget:t,attrName:r,prevValue:n,newValue:a};o[i]=e,u(o)},v=function(e){for(var t,r,n={},a=e.attributes,i=0,o=a.length;o>i;i++)t=a[i],r=t.name,"setAttribute"!==r&&(n[r]=t.value);return n})),t[n]=function(e,r){if(n=e.toUpperCase(),K||(K=!0,U?(g=function(e,t){function r(e,t){for(var r=0,n=e.length;n>r;t(e[r++]));}return new U(function(n){for(var a,i,o=0,c=n.length;c>o;o++)a=n[o],"childList"===a.type?(r(a.addedNodes,e),r(a.removedNodes,t)):(i=a.target,i.attributeChangedCallback&&"style"!==a.attributeName&&i.attributeChangedCallback(a.attributeName,a.oldValue,i.getAttribute(a.attributeName)))})}(o("attached"),o("detached")),g.observe(t,{childList:!0,subtree:!0})):(t.addEventListener("DOMNodeInserted",l("attached")),t.addEventListener("DOMNodeRemoved",l("detached"))),t.addEventListener("readystatechange",function(){a(t.querySelectorAll(w),"attached")}),t.createElement=function(e,r){var n,a=j.apply(t,arguments);return r&&a.setAttribute("is",e=r.toLowerCase()),n=M.call(C,e.toUpperCase()),n>-1&&s(a,N[n]),a},V.cloneNode=function(e){var t=x.call(this,!!e),r=c(t);return r>-1&&s(t,N[r]),e&&i(t.querySelectorAll(w)),t}),-1<M.call(C,n))throw new Error("A "+e+" type is already registered");if(!y.test(n)||-1<M.call(A,n))throw new Error("The type "+e+" is invalid");var n,u=function(){return t.createElement(h,f&&n)},d=r||T,f=F.call(d,m),h=f?r[m]:n,p=C.push(n)-1;return w=w.concat(w.length?",":"",f?h+'[is="'+e.toLowerCase()+'"]':h),u.prototype=N[p]=F.call(d,"prototype")?d.prototype:S(V),a(t.querySelectorAll(w),"attached"),u}}}(window,document,Object,"registerElement");