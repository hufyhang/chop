$ch.define("service",function(){"use strict";$ch.require("router"),$$CHOP.service={},$$CHOP.service={_services:{},add:function(e,i){this._services[e]={name:e,view:i}}},$$CHOP.router.add({"_chopjs_service/:name/:data":function(e){var i={},r=e.data.split("&");$$CHOP.each(r,function(e){var r=e.split("=")[0].trim(),c=e.split("=")[1].trim();i[r]=c});var c,t=$$CHOP.service._services[e.name];c=void 0===t?$$CHOP.view({html:"Oops! No such Chop.js service."}):t.view(i);var s=document.querySelectorAll("body style"),n=document.querySelectorAll("body script");$$CHOP.find("body").view(c),$$CHOP.each(s,function(e){document.body.appendChild(e)}),$$CHOP.each(n,function(e){document.body.appendChild(e)})}});var e=$$CHOP.findAll("ch-service");$$CHOP.each(e,function(e){e=e.el;var i,r=e.getAttribute("src").trim(),c=e.getAttribute("service").trim();i="/"===r.slice(-1)?"#/_chopjs_service/":"/#/_chopjs_service/",r=r+i+c;var t=[],s=e.querySelectorAll("ch-data");$$CHOP.each(s,function(e){var i=e.getAttribute("key").trim(),r=e.innerHTML;t.push(i+"="+r)}),r+="/"+t.join("&"),e.innerHTML='<iframe src="'+r+'"></iframe>'})});